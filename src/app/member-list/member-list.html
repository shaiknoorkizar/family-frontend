<div class="container">
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading members...</p>
  </div>

  <div *ngIf="error" class="error-container">
    <h3>Error</h3>
    <p>{{ error }}</p>
  </div>

  <div *ngIf="!loading && !error">
    <div class="page-header">
      <h2>Family Members</h2>
      <button 
        (click)="toggleAddForm()" 
        [class]="showAddForm ? 'btn btn-secondary' : 'btn btn-primary'">
        {{ showAddForm ? 'Cancel' : '+ Add Member' }}
      </button>
    </div>

    <!-- Add Member Form -->
    <div *ngIf="showAddForm" class="add-form">
      <h3>Add New Member</h3>
      
      <form (ngSubmit)="addMember()">
        <div class="form-group">
          <label for="name">Name *</label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            [(ngModel)]="newMember.name" 
            required
            [disabled]="submitting"
            placeholder="Enter member name">
        </div>

        <div class="form-group">
          <label for="dob">Date of Birth *</label>
          <input 
            type="date" 
            id="dob" 
            name="dob" 
            [(ngModel)]="newMember.dob" 
            required
            [disabled]="submitting">
        </div>

        <div class="form-group">
          <label for="relationship">Relationship *</label>
          <input 
            type="text" 
            id="relationship" 
            name="relationship" 
            [(ngModel)]="newMember.relationship" 
            required
            placeholder="e.g., Father, Mother, Son, Daughter"
            [disabled]="submitting">
        </div>

        <div *ngIf="submitError" class="error-message">
          {{ submitError }}
        </div>

        <div class="form-actions">
          <button 
            type="submit" 
            [disabled]="submitting"
            class="btn btn-success">
            {{ submitting ? 'Adding...' : 'Add Member' }}
          </button>
          <button 
            type="button" 
            (click)="toggleAddForm()"
            [disabled]="submitting"
            class="btn btn-secondary">
            Cancel
          </button>
        </div>
      </form>
    </div>

    <!-- Members Table -->
    <table *ngIf="members.length > 0" class="members-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Date of Birth</th>
          <th>Relationship</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let m of members">
          <td>{{m.name}}</td>
          <td>{{m.dob}}</td>
          <td>{{m.relationship}}</td>
        </tr>
      </tbody>
    </table>
    
    <div *ngIf="members.length === 0" class="empty-state">
      <div class="empty-icon">ðŸ‘¤</div>
      <p>No members found. Add a new member to get started!</p>
    </div>
  </div>
</div>
